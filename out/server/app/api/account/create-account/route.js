"use strict";(()=>{var e={};e.id=750,e.ids=[750],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},44945:(e,t,n)=>{n.r(t),n.d(t,{headerHooks:()=>h,originalPathname:()=>f,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>w});var a={};n.r(a),n.d(a,{POST:()=>POST,dynamic:()=>l}),n(78976);var o=n(10884),c=n(16132),s=n(1894),r=n(79581),i=n(62421),u=n(95798);let l="force-dynamic";async function POST(e){try{await (0,s.Z)();let{name:t,pin:n,uid:a}=await e.json(),o=await r.Z.find({uid:a,name:t});console.log(o);let c=await r.Z.find({});if(o&&o.length>0)return u.Z.json({success:!1,message:"Please try with a different name"});if(c&&4===c.length)return u.Z.json({success:!1,message:"You can only add max 4 accounts"});let l=await (0,i.hash)(n,12),d=await r.Z.create({name:t,pin:l,uid:a});if(d)return u.Z.json({success:!0,message:"Account created successfully"});return u.Z.json({success:!1,message:"Something Went wrong"})}catch(e){return console.log(e),u.Z.json({success:!1,message:"Something Went wrong"})}}let d=new o.AppRouteRouteModule({definition:{kind:c.x.APP_ROUTE,page:"/api/account/create-account/route",pathname:"/api/account/create-account",filename:"route",bundlePath:"app/api/account/create-account/route"},resolvedPagePath:"/home/dci-student/Desktop/movis-app-netlify/src/app/api/account/create-account/route.js",nextConfigOutput:"",userland:a}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:g,headerHooks:h,staticGenerationBailout:w}=d,f="/api/account/create-account/route"},1894:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(11185),o=n.n(a);let connectToDB=async()=>{try{await o().connect(process.env.MONGODB_URI),console.log("mongodb is connected")}catch(e){console.log(e)}},c=connectToDB},79581:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(11185),o=n.n(a);let c=new(o()).Schema({uid:String,name:String,pin:String},{timestamps:!0}),s=o().models.Account||o().model("Account",c),r=s}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),n=t.X(0,[126,933,449,798,421],()=>__webpack_exec__(44945));module.exports=n})();